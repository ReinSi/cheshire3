<config>
  <subConfigs>
    
    <subConfig type="preParser" id="OpenOfficeToPdfPreParser">
        <objectType>cheshire3.formats.preParser.DependentCmdLinePreParser</objectType>
        <docs>PreParser to start OpenOffice service, then convert documents to PDF.</docs>
        <paths>
            <path type="dependencyExecutable">soffice</path>
            <path type="executable">python</path>
            <path type="executablePath">/opt/openoffice.org2.3/program</path>
        </paths>
        <options>
            <setting type="outMimeType">application/pdf</setting>
            <setting type="dependencyCommandLine">-headless -accept="socket,port=8100;urp;"</setting>
            <setting type="commandLine">~/cheshire3/cheshire3/code/DocumentConverter.py %INDOC% %OUTDOC%</setting>
        </options>
    </subConfig>
    
    <!-- Metadata Discovery PreParsers -->

    <subConfig type="preParser" id="UnixFileFormatMetadataDiscoveryPreParser">
      <objectType>cheshire3.formats.preParser.CmdLineMetadataDiscoveryPreParser</objectType>
      <docs>PreParser to use the UNIX file utility for format identification.</docs>
      <paths>
        <path type="executable">file</path>
      </paths>
      <options>
        <setting type="metadataSubType">format</setting>
        <setting type="commandLine">%INDOC%</setting>
      </options>
    </subConfig>
    
    <subConfig type="preParser" id="UnixFileMimeTypeMetadataDiscoveryPreParser">
      <objectType>cheshire3.formats.preParser.CmdLineMetadataDiscoveryPreParser</objectType>
      <docs>PreParser to use the UNIX file utility for format identification.</docs>
      <paths>
        <path type="executable">file</path>
      </paths>
      <options>
        <setting type="metadataSubType">mimeType</setting>
        <setting type="commandLine">--mime-type %INDOC%</setting>
      </options>
    </subConfig>
    
    <subConfig type="preParser" id="UnixFileMimeEncodingMetadataDiscoveryPreParser">
      <objectType>cheshire3.formats.preParser.CmdLineMetadataDiscoveryPreParser</objectType>
      <docs>PreParser to use the UNIX file utility for format identification.</docs>
      <paths>
        <path type="executable">file</path>
      </paths>
      <options>
        <setting type="metadataSubType">mimeEncoding</setting>
        <setting type="commandLine">--mime-encoding %INDOC%</setting>
      </options>
    </subConfig>
    
    <subConfig type="preParser" id="ClamVirusScanPreParser">
      <objectType>cheshire3.formats.preParser.CmdLineMetadataDiscoveryPreParser</objectType>
      <docs>PreParser to use the ClamAV to scan the document for viruses, adding the result of the scan to document metadata.</docs>
      <paths>
        <path type="executable">clamscan</path>
      </paths>
      <options>
        <setting type="commandLine">--stdout --no-summary %INDOC%</setting>
        <setting type="metadataType">ClamAntiVirus</setting>
      </options>
    </subConfig>
    
    <subConfig type="preParser" id="DroidMetadataDiscoveryPreParser">
        <objectType>cheshire3.formats.preParser.XmlParsingCmdLineMetadataDiscoveryPreParser</objectType>
        <docs>PreParser to use The National Archives' DROID software for format identification. REQUIRES Java!</docs>
        <paths>
            <path type="executable">java -jar droid.jar</path>
            <path type="workingPath">/home/cheshire/cheshire3/install/DROID 3.0</path>
        </paths>
        <options>
            <setting type="outMimeType">text/xml</setting>
            <setting type="metadataType">droid</setting>
            <setting type="commandLine">-SDROID_SignatureFile_V13.xml -L%INDOC% -O%OUTDOC% -FXML</setting>
        </options>
        <source id="certainty" default="Unknown">
            <xpath xmlns:tna="http://www.nationalarchives.gov.uk/pronom/FileCollection">/tna:FileCollection/tna:IdentificationFile/@IdentQuality</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>    
        </source>
        <source id="mimeType" default="Unknown">
            <xpath xmlns:tna="http://www.nationalarchives.gov.uk/pronom/FileCollection">/tna:FileCollection/tna:IdentificationFile/tna:FileFormatHit/tna:MimeType</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
        <source id="format" default="Unknown">
            <xpath xmlns:tna="http://www.nationalarchives.gov.uk/pronom/FileCollection">/tna:FileCollection/tna:IdentificationFile/tna:FileFormatHit/tna:Name</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
        <source id="version">
            <xpath xmlns:tna="http://www.nationalarchives.gov.uk/pronom/FileCollection">/tna:FileCollection/tna:IdentificationFile/tna:FileFormatHit/tna:Version</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
        <source id="puid">
            <xpath xmlns:tna="http://www.nationalarchives.gov.uk/pronom/FileCollection">/tna:FileCollection/tna:IdentificationFile/tna:FileFormatHit/tna:PUID</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>    
        <source id="warning">
            <xpath xmlns:tna="http://www.nationalarchives.gov.uk/pronom/FileCollection">/tna:FileCollection/tna:IdentificationFile/tna:FileFormatHit/tna:IdentificationWarning</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
    </subConfig>
    
    <subConfig type="preParser" id="JhoveMetadataDiscoveryPreParser">
        <objectType>cheshire3.formats.preParser.XmlParsingCmdLineMetadataDiscoveryPreParser</objectType>
        <docs>PreParser to use the JHOVE for format identification. REQUIRES Java!</docs>
        <paths>
            <path type="executable">jhove</path>
            <path type="executablePath">/home/cheshire/cheshire3/install/jhove</path>
        </paths>
        <options>
            <setting type="outMimeType">text/xml</setting>
            <setting type="commandLine">-c ~/cheshire3/install/jhove/conf/jhove.conf -h XML %INDOC%</setting>
        </options>
        
        <source id="analysisDate">
            <xpath xmlns:j="http://hul.harvard.edu/ois/xml/ns/jhove">/j:jhove/j:date</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
        <source id="mimeType">
            <xpath xmlns:j="http://hul.harvard.edu/ois/xml/ns/jhove">/j:jhove/j:repInfo/j:mimeType</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
        <source id="byteSize">
            <xpath xmlns:j="http://hul.harvard.edu/ois/xml/ns/jhove">/j:jhove/j:repInfo/j:size</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
        <source id="format" default="Unknown">
            <xpath xmlns:j="http://hul.harvard.edu/ois/xml/ns/jhove">/j:jhove/j:repInfo/j:format</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
        <source id="version">
            <xpath xmlns:j="http://hul.harvard.edu/ois/xml/ns/jhove">/j:jhove/j:repInfo/j:version</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
        <source id="status">
            <xpath xmlns:j="http://hul.harvard.edu/ois/xml/ns/jhove">/j:jhove/j:repInfo/j:status</xpath>
            <process>
                <object type="extractor" ref="SimpleExtractor" />
            </process>
        </source>
    </subConfig>
    
    <subConfig type="preParser" id="EmailToXmlPreParser">
    	<objectType>cheshire3.formats.preParser.EmailToXmlPreParser</objectType>
    	<docs>PreParser that parses email documents into and returns an XML representation.</docs>
    </subConfig>
    
  </subConfigs>
  
</config>